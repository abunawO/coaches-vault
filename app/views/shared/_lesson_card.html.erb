<div class="card lesson-card">
  <% thumb = lesson_thumbnail_url(lesson) %>
  <div class="video-thumb lesson-card__thumb">
    <% if thumb.present? %>
      <img src="<%= thumb %>" alt="<%= lesson.title %> cover" class="video-thumb__img" loading="lazy" />
    <% else %>
      <div class="thumb-placeholder">
        <span class="play-icon">â–¶</span>
      </div>
    <% end %>
  </div>
  <div class="card-header">
    <div>
      <div class="badge <%= locked ? "badge-warning" : "badge-success" %>"><%= locked ? "Locked" : "Unlocked" %></div>
      <h3 class="card-title"><%= lesson.title %></h3>
      <p class="muted">by <%= coach_display_name %></p>
    </div>
  </div>
  <% if lesson.description.present? %>
    <p class="muted"><%= truncate(lesson.description, length: 140) %></p>
  <% end %>
  <div class="card-actions">
    <% if locked %>
      <%= link_to "Subscribe to unlock", locked_path, class: "btn btn-secondary" %>
    <% else %>
      <%= link_to "Open", open_path, class: "btn btn-primary" %>
    <% end %>
  </div>
</div>
