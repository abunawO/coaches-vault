<div class="container">
  <div class="page-header">
    <div>
      <h1 class="page-title">Notifications</h1>
      <p class="page-subtitle">Unread items appear first.</p>
    </div>
    <%= button_to "Mark all as read", mark_all_notifications_read_path, method: :post, class: "btn btn-secondary" %>
  </div>

  <% if @notifications.any? %>
    <div class="stack">
      <% @notifications.each do |notification| %>
        <div class="card <%= "notification-unread" if notification.read_at.nil? %>">
          <div class="card-header">
            <strong><%= notification.message %></strong>
          </div>
          <p class="muted"><%= notification.created_at.strftime("%b %d, %Y %H:%M") %></p>
          <div class="card-actions">
            <% if notification.notifiable.is_a?(Comment) %>
              <% lesson = notification.notifiable.lesson %>
              <%= link_to "View lesson", lesson_path(lesson), class: "btn btn-secondary" %>
            <% end %>
            <% if notification.read_at.nil? %>
              <span class="badge badge-warning">Unread</span>
            <% else %>
              <span class="badge badge-neutral">Read</span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="card empty-state">
      <p>No notifications.</p>
    </div>
  <% end %>
</div>
