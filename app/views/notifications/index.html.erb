<div class="container">
  <div class="page-header">
    <div>
      <h1 class="page-title">Notifications</h1>
      <p class="page-subtitle">Unread items appear first.</p>
    </div>
    <%= button_to "Mark all as read", mark_all_notifications_read_path, method: :post, class: "btn btn-secondary" %>
  </div>

  <% if @notifications.any? %>
    <div class="stack">
      <% @notifications.each do |notification| %>
        <div class="card <%= "notification-unread" if notification.read_at.nil? %>">
          <div class="card-header">
            <div class="notification-header-row">
              <div class="notification-actor">
                <% if notification.actor %>
                  <strong><%= notification.actor.email %></strong>
                <% else %>
                  <strong>System</strong>
                <% end %>
                <span class="muted"><%= notification.message %></span>
              </div>
              <% if notification.read_at.nil? %>
                <span class="badge badge-warning">Unread</span>
              <% else %>
                <span class="badge badge-neutral">Read</span>
              <% end %>
            </div>
          </div>
          <p class="muted">Received <%= time_ago_in_words(notification.created_at) %> ago</p>
          <div class="card-actions">
            <%= link_to "Open", notification_path(notification), class: "btn btn-secondary" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="card empty-state">
      <p>No notifications.</p>
    </div>
  <% end %>
</div>
