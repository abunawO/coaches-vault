<div class="container">
  <div class="surface surface--narrow center stack">
    <h1><%= @coach_profile.display_name %></h1>
    <% if @coach_profile.bio.present? %>
      <p class="muted coach-bio"><%= @coach_profile.bio %></p>
    <% end %>

    <div class="actions-row" style="justify-content: center;">
      <%= link_to "View Lessons", public_coach_lessons_path(@coach_profile.slug), class: "btn btn-primary" %>

      <% if logged_in? && current_user.student? %>
        <% if current_user.subscribed_to?(@coach) %>
          <%= button_to "Message coach", conversations_path(coach_id: @coach.id), method: :post, class: "btn btn-secondary" %>
          <%= button_to "Cancel subscription", cancel_coach_subscription_path(@coach), method: :delete, class: "btn btn-secondary" %>
        <% else %>
          <div class="surface stack" style="padding: 12px 16px; text-align: left;">
            <strong>Subscribe to message this coach</strong>
            <p class="muted" style="margin: 4px 0 10px 0;">Unlock DMs and lessons by subscribing.</p>
            <%= button_to "Subscribe to unlock", coach_subscription_path(@coach), method: :post, class: "btn btn-primary" %>
          </div>
        <% end %>
      <% elsif logged_in? && current_user.coach? %>
        <span class="muted">You are viewing your coach profile.</span>
      <% else %>
        <%= link_to "Log in to subscribe", login_path, class: "btn btn-secondary" %>
      <% end %>
    </div>
  </div>
</div>
